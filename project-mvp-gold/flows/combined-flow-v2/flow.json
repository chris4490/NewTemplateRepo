{
  "description": "",
  "disabled": false,
  "dsl": {
    "startTask": "2",
    "tasks": {
      "0": {
        "action": "logged-in",
        "id": "0",
        "name": "End",
        "next": {
          "rules": []
        },
        "type": "automated",
        "view": {
          "x": 11208,
          "y": 612
        }
      },
      "10": {
        "action": "verify-code-otp-sms",
        "id": "10",
        "name": "Verify Code / OTP / SMS",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "99"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 8904,
          "y": -708
        }
      },
      "100": {
        "action": "connector",
        "arguments": {
          "args": {
            "type": "inline",
            "value": [
              {
                "key": "endpoint",
                "type": "string",
                "value": "/personv2_nodb/session?person_id={{user.customAttributes.gfmPersonId}}"
              },
              {
                "key": "timeout",
                "type": "number",
                "value": 10
              },
              {
                "key": "payload",
                "type": "string",
                "value": "{\n}"
              }
            ]
          },
          "command": {
            "type": "inline",
            "value": "put"
          },
          "connectorId": {
            "type": "inline",
            "value": "CI2fnc9SxtnAfhbQCopC8jo2ZKSGV"
          },
          "resultPath": {
            "type": "inline",
            "value": "sessionResult"
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": "http"
          }
        },
        "errorHandling": {
          "request_error": "automatic"
        },
        "id": "100",
        "name": "Get Session Token",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "49"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 10320,
          "y": 732
        }
      },
      "101": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "404"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "connectors.accountsPatchResult.statusCode"
                }
              }
            ],
            "interactionId": "ermg438hf3s",
            "name": "404 - switch to post"
          },
          {
            "interactionId": "ELSE",
            "name": "ELSE"
          }
        ],
        "id": "101",
        "name": "Switch to post",
        "next": {
          "rules": [
            {
              "interactionId": "ermg438hf3s",
              "taskId": "102"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 10116,
          "y": 1056
        }
      },
      "102": {
        "action": "connector",
        "arguments": {
          "args": {
            "type": "inline",
            "value": [
              {
                "key": "endpoint",
                "type": "string",
                "value": "/personv2_nodb/accounts"
              },
              {
                "key": "timeout",
                "type": "number",
                "value": 10
              },
              {
                "key": "payload",
                "type": "string",
                "value": "{\n  \"first_name\": \"{{user.givenName}}\",\n  \"last_name\": \"{{user.familyName}}\",\n  \"email\": \"{{user.email}}\",\n  \"email_verified\": true,\n  \"consent\": {\n    \"email\": {\n      \"opt_in\": true\n    },\n    \"phone\": {\n      \"opt_in\": true,\n      \"type\": \"sms\"\n    }\n  },\n  \"language\": \"en_US\",\n  \"phone_country_code\": \"US\",\n  \"phone\": {\n    \"number\": \"{{user.phone}}\",\n    \"verified\": true\n  },\n  \"external_user_id\": \"{{user.userId}}\"\n}"
              }
            ]
          },
          "command": {
            "type": "inline",
            "value": "post"
          },
          "connectorId": {
            "type": "inline",
            "value": "CI2fnc9SxtnAfhbQCopC8jo2ZKSGV"
          },
          "resultPath": {
            "type": "inline",
            "value": "createUserResult"
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": "http"
          }
        },
        "errorHandling": {
          "request_error": "automatic"
        },
        "id": "102",
        "name": "Create GFM User",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "107"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 10524,
          "y": 1044
        }
      },
      "103": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "contains",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "NoMFA"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "user.email"
                }
              },
              {
                "operator": "in",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": [
                    "explorer.descope.com",
                    "auth.descope.io"
                  ]
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "device.location.hostname"
                }
              }
            ],
            "interactionId": "t536bn0wyeq",
            "name": "No MFA"
          },
          {
            "interactionId": "ELSE",
            "name": "Yes MFA"
          }
        ],
        "id": "103",
        "name": "MFA?",
        "next": {
          "rules": [
            {
              "interactionId": "t536bn0wyeq",
              "taskId": "105"
            },
            {
              "interactionId": "ELSE",
              "taskId": "8"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 6072,
          "y": -312
        }
      },
      "104": {
        "action": "otp-embedded-code-verify",
        "id": "104",
        "name": "Verify Embedded OTP Code",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "99"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 7260,
          "y": -36
        }
      },
      "105": {
        "action": "sign-in-otp-embedded",
        "id": "105",
        "name": "Generate OTP Embedded Code for Sign In",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "106"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 6480,
          "y": -96
        }
      },
      "106": {
        "contextKeys": [
          "sentTo.maskedPhone",
          "embeddedCode"
        ],
        "id": "106",
        "name": "Verify OTP",
        "next": {
          "rules": [
            {
              "interactionId": "resend",
              "taskId": "105"
            },
            {
              "interactionId": "oneTimeCodeId",
              "taskId": "104"
            }
          ]
        },
        "screenId": "SC2fbai9lEYOZN6NhPCdjJcSgGSw7",
        "type": "screen",
        "view": {
          "x": 6816,
          "y": -72
        }
      },
      "107": {
        "action": "update-user-properties",
        "arguments": {
          "userPropertiesDefinitions": {
            "ArgType": "",
            "type": "inline",
            "value": [
              {
                "key": "customAttributes.gfmPersonId",
                "type": "context",
                "value": "connectors.createUserResult.person.person_id"
              }
            ]
          }
        },
        "errorHandling": {
          "UpdateUserPropertiesFailed": "automatic"
        },
        "id": "107",
        "name": "Update User / Properties from GFM data",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "100"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 10992,
          "y": 1044
        }
      },
      "108": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "contains",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "NoMFA"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "user.email"
                }
              },
              {
                "operator": "in",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": [
                    "explorer.descope.com",
                    "auth.descope.io"
                  ]
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "device.location.hostname"
                }
              }
            ],
            "interactionId": "t536bn0wyeq",
            "name": "No MFA"
          },
          {
            "interactionId": "ELSE",
            "name": "Yes MFA"
          }
        ],
        "id": "108",
        "name": "MFA?",
        "next": {
          "rules": [
            {
              "interactionId": "t536bn0wyeq",
              "taskId": "110"
            },
            {
              "interactionId": "ELSE",
              "taskId": "20"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 6468,
          "y": 648
        }
      },
      "109": {
        "action": "otp-embedded-code-verify",
        "id": "109",
        "name": "Verify Embedded OTP Code",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "99"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 7656,
          "y": 924
        }
      },
      "11": {
        "id": "11",
        "name": "Replace with connectors (update/create GFM user)",
        "next": {
          "rules": [
            {
              "interactionId": "v4zsJKCHEw",
              "taskId": "44"
            }
          ]
        },
        "screenId": "SC2eVZZiYHZwO44gkzYgjHCvNGWxc",
        "type": "screen",
        "view": {
          "x": 9792,
          "y": 492
        }
      },
      "110": {
        "action": "sign-in-otp-embedded",
        "id": "110",
        "name": "Generate OTP Embedded Code for Sign In",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "111"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 6876,
          "y": 864
        }
      },
      "111": {
        "contextKeys": [
          "sentTo.maskedPhone",
          "embeddedCode"
        ],
        "id": "111",
        "name": "Verify OTP",
        "next": {
          "rules": [
            {
              "interactionId": "resend",
              "taskId": "110"
            },
            {
              "interactionId": "oneTimeCodeId",
              "taskId": "109"
            }
          ]
        },
        "screenId": "SC2fmacoB9cyZl3zeqMhOFWmTiZDV",
        "type": "screen",
        "view": {
          "x": 7212,
          "y": 888
        }
      },
      "12": {
        "contextKeys": [
          "form.message_text",
          "form.title_text"
        ],
        "id": "12",
        "inputKeys": [
          "newPassword",
          "email",
          "firstName",
          "email",
          "lastName"
        ],
        "name": "Sign Up",
        "next": {
          "rules": [
            {
              "interactionId": "8nBgcJmDpl",
              "taskId": "73"
            },
            {
              "interactionId": "EkzTmktRP_",
              "taskId": "3"
            }
          ]
        },
        "screenId": "SC2eVZZgEmtFUbzpj32BDNG2UXt64",
        "type": "screen",
        "view": {
          "x": -288,
          "y": -864
        }
      },
      "14": {
        "action": "password-sign-up",
        "errorHandling": {
          "PasswordSignUpFailed": "automatic"
        },
        "id": "14",
        "name": "Descope Sign Up / Password",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "69"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 1944,
          "y": -456
        }
      },
      "18": {
        "id": "18",
        "inputKeys": [
          "form.otpMethod"
        ],
        "name": "Capture Phone Number",
        "next": {
          "rules": [
            {
              "interactionId": "ODpHRNvD-L",
              "taskId": "19"
            }
          ]
        },
        "screenId": "SC2eVZZdlyTuvV4LWtPxi7mc6yvAO",
        "type": "screen",
        "view": {
          "x": 6180,
          "y": 1452
        }
      },
      "19": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "Text Message"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "form.otpMethod"
                }
              }
            ],
            "interactionId": "w58nd1jvozs",
            "name": "Text"
          },
          {
            "interactionId": "ELSE",
            "name": "Voice"
          }
        ],
        "id": "19",
        "name": "Text or Voice",
        "next": {
          "rules": [
            {
              "interactionId": "w58nd1jvozs",
              "taskId": "108"
            },
            {
              "interactionId": "ELSE",
              "taskId": "80"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 6624,
          "y": 1404
        }
      },
      "2": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "/signup"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "device.location.path"
                }
              }
            ],
            "interactionId": "4nbjwmk408d",
            "name": "Sign Up"
          },
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "/signin"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "device.location.path"
                }
              }
            ],
            "interactionId": "6q16rpagzel",
            "name": "Sign In?"
          },
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "/forgotpassword"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "device.location.path"
                }
              }
            ],
            "interactionId": "w7iva20l0sn",
            "name": "Forgot Password?"
          },
          {
            "interactionId": "ELSE",
            "name": "else?"
          }
        ],
        "id": "2",
        "name": "What path",
        "next": {
          "rules": [
            {
              "interactionId": "4nbjwmk408d",
              "taskId": "67"
            },
            {
              "interactionId": "6q16rpagzel",
              "taskId": "3"
            },
            {
              "interactionId": "w7iva20l0sn",
              "taskId": "24"
            },
            {
              "interactionId": "ELSE",
              "taskId": "3"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": -1584,
          "y": 492
        }
      },
      "20": {
        "action": "update-user-otp-sms",
        "arguments": {
          "addToLoginIDs": {
            "ArgType": "",
            "type": "inline",
            "value": false
          },
          "extraTemplateVals": {
            "ArgType": "",
            "type": "inline"
          },
          "onMergeUseExisting": {
            "ArgType": "",
            "type": "inline",
            "value": "true"
          },
          "providerId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          }
        },
        "errorHandling": {
          "OTPUnauthorizedRequest": "automatic",
          "OTPUpdateUserPhoneFailed": "automatic"
        },
        "id": "20",
        "name": "Update User / OTP / SMS",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "21"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 7032,
          "y": 1116
        }
      },
      "21": {
        "contextKeys": [
          "sentTo.maskedPhone"
        ],
        "id": "21",
        "name": "Verify OTP",
        "next": {
          "rules": [
            {
              "interactionId": "resend",
              "taskId": "20"
            },
            {
              "interactionId": "oneTimeCodeId",
              "taskId": "22"
            }
          ]
        },
        "screenId": "SC2eVZZdLnT86zAkeFiXJhRW61sRT",
        "type": "screen",
        "view": {
          "x": 7716,
          "y": 1104
        }
      },
      "22": {
        "action": "verify-code-otp-sms",
        "errorHandling": {
          "OTPVerifyCodeExpired": "automatic",
          "OTPVerifyCodePhoneFailed": "automatic"
        },
        "id": "22",
        "name": "Verify Code / OTP / SMS",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "99"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 8868,
          "y": 1176
        }
      },
      "24": {
        "contextKeys": [
          "form.message_text",
          "form.title_text"
        ],
        "id": "24",
        "inputKeys": [
          "email"
        ],
        "name": "Forgot password",
        "next": {
          "rules": [
            {
              "interactionId": "uwzCypD1UY",
              "taskId": "3"
            },
            {
              "interactionId": "Bfqm278j3I",
              "taskId": "88"
            }
          ]
        },
        "screenId": "SC2eVZZc3T4FTb1AJW8WIvm5tMWqB",
        "type": "screen",
        "view": {
          "x": -228,
          "y": 2448
        }
      },
      "25": {
        "action": "password-send-reset",
        "arguments": {
          "extraTemplateVals": {
            "type": "inline",
            "value": ""
          },
          "providerId": {
            "type": "inline",
            "value": ""
          },
          "templateId": {
            "type": "inline",
            "value": ""
          },
          "uri": {
            "type": "inline",
            "value": ""
          },
          "verifyStepId": {
            "type": "inline",
            "value": "25.end"
          }
        },
        "errorHandling": {
          "MagicLinkVerifyFailed": "automatic",
          "PasswordSendResetFailed": "automatic"
        },
        "id": "25",
        "name": "Send Password Reset (TBD - custom template)",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "25.end"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 1560,
          "y": 2436
        }
      },
      "25.end": {
        "action": "verify-magic-link",
        "arguments": {},
        "errorHandling": {
          "MagicLinkVerifyFailed": "automatic",
          "PasswordSendResetFailed": "automatic"
        },
        "id": "25.end",
        "name": "Send Password Reset (TBD - custom template)",
        "next": {
          "rules": []
        },
        "type": "automated",
        "view": {
          "x": 1560,
          "y": 2436
        }
      },
      "26": {
        "contextKeys": [
          "sentTo.maskedEmail"
        ],
        "id": "26",
        "name": "Password Reset Sent",
        "next": {
          "rules": [
            {
              "interactionId": "AwAJ4_ao1q",
              "taskId": "3"
            }
          ]
        },
        "screenId": "SC2eVZZiP5xJMWiDoGKkkYH7fSgsG",
        "type": "screen",
        "view": {
          "x": 1980,
          "y": 2400
        }
      },
      "29": {
        "id": "29",
        "inputKeys": [
          "newPassword"
        ],
        "name": "Verified New Password",
        "next": {
          "rules": [
            {
              "interactionId": "8nBgcJmDpl",
              "taskId": "57"
            }
          ]
        },
        "screenId": "SC2eVZZisSG0sxgNhdWaRg2MPGatm",
        "type": "screen",
        "view": {
          "x": 2364,
          "y": 2532
        }
      },
      "3": {
        "contextKeys": [
          "form.message_text",
          "form.title_text"
        ],
        "id": "3",
        "inputKeys": [
          "email",
          "newPassword"
        ],
        "name": "Sign in",
        "next": {
          "rules": [
            {
              "interactionId": "VkogCzGAzo",
              "taskId": "24"
            },
            {
              "interactionId": "Uxa1HWZ5od",
              "taskId": "12"
            },
            {
              "interactionId": "8nBgcJmDpl",
              "taskId": "87"
            }
          ]
        },
        "screenId": "SC2eVZZh2XzIljFyBsNBmNkU5YplG",
        "type": "screen",
        "view": {
          "x": -276,
          "y": 720
        }
      },
      "30": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "not-empty",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": ""
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "unauthUser.loginIds"
                }
              }
            ],
            "interactionId": "pq92osv2g3b",
            "name": "Yes"
          },
          {
            "interactionId": "ELSE",
            "name": "No"
          }
        ],
        "id": "30",
        "name": "Does user exist in Descope DB?",
        "next": {
          "rules": [
            {
              "interactionId": "pq92osv2g3b",
              "taskId": "36"
            },
            {
              "interactionId": "ELSE",
              "taskId": "95"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 1056,
          "y": -804
        }
      },
      "31": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "not-empty",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": ""
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "unauthUser.loginIds"
                }
              }
            ],
            "interactionId": "pq92osv2g3b",
            "name": "Yes"
          },
          {
            "interactionId": "ELSE",
            "name": "No"
          }
        ],
        "id": "31",
        "name": "Does user exist in Descope DB?",
        "next": {
          "rules": [
            {
              "interactionId": "pq92osv2g3b",
              "taskId": "5"
            },
            {
              "interactionId": "ELSE",
              "taskId": "97"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 972,
          "y": 792
        }
      },
      "32": {
        "action": "password-sign-up",
        "errorHandling": {
          "PasswordSignUpFailed": "automatic"
        },
        "id": "32",
        "name": "Descope Sign Up / Password",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "42"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 2964,
          "y": 912
        }
      },
      "35": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "not-empty",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": ""
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "unauthUser.loginIds"
                }
              }
            ],
            "interactionId": "pq92osv2g3b",
            "name": "Yes"
          },
          {
            "interactionId": "ELSE",
            "name": "No"
          }
        ],
        "id": "35",
        "name": "Does user exist in Descope DB?",
        "next": {
          "rules": [
            {
              "interactionId": "pq92osv2g3b",
              "taskId": "94"
            },
            {
              "interactionId": "ELSE",
              "taskId": "45"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 1044,
          "y": 2472
        }
      },
      "36": {
        "action": "password-sign-in",
        "errorHandling": {
          "PasswordExpired": "automatic",
          "PasswordSignInFailed": "automatic"
        },
        "id": "36",
        "name": "Descope Sign In / Password",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "63"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 1752,
          "y": -888
        }
      },
      "39": {
        "id": "39",
        "inputKeys": [
          "email"
        ],
        "name": "TBD - User already Exists, Sign in",
        "next": {
          "rules": [
            {
              "interactionId": "AYA8hOmP_3",
              "taskId": "24"
            },
            {
              "interactionId": "Uxa1HWZ5od",
              "taskId": "12"
            },
            {
              "interactionId": "8nBgcJmDpl",
              "taskId": "5"
            }
          ]
        },
        "screenId": "SC2eYkrWs3LByqf4pcxY96uiTbcQL",
        "type": "screen",
        "view": {
          "x": -276,
          "y": 396
        }
      },
      "41": {
        "id": "41",
        "name": "TBD - replace with error messageUser is banned",
        "next": {
          "rules": [
            {
              "interactionId": "uwzCypD1UY",
              "taskId": "3"
            }
          ]
        },
        "screenId": "SC2eYkrYOuA5pP8I1tDLbTAo6H3x0",
        "type": "screen",
        "view": {
          "x": -888,
          "y": 552
        }
      },
      "42": {
        "action": "update-user-properties",
        "arguments": {
          "userPropertiesDefinitions": {
            "ArgType": "",
            "type": "inline",
            "value": [
              {
                "key": "verifiedEmail",
                "type": "context",
                "value": "connectors.migrateResult.person.email_verified"
              },
              {
                "key": "givenName",
                "type": "context",
                "value": "connectors.migrateResult.person.name.first"
              },
              {
                "key": "familyName",
                "type": "context",
                "value": "connectors.migrateResult.person.name.last"
              },
              {
                "key": "phone",
                "type": "context",
                "value": "connectors.migrateResult.person.phone.number"
              },
              {
                "key": "verifiedPhone",
                "type": "context",
                "value": "connectors.migrateResult.person.phone.verified"
              },
              {
                "key": "customAttributes.gfmPersonId",
                "type": "context",
                "value": "connectors.migrateResult.person.person_id"
              }
            ]
          }
        },
        "errorHandling": {
          "UpdateUserPropertiesFailed": "automatic"
        },
        "id": "42",
        "name": "Update User / Properties from GFM data",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "63"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 4680,
          "y": 936
        }
      },
      "44": {
        "id": "44",
        "name": "Replace with connectors (Create session)",
        "next": {
          "rules": [
            {
              "interactionId": "v4zsJKCHEw",
              "taskId": "49"
            }
          ]
        },
        "screenId": "SC2eYmliT6kCYJC6GWTER47KFGSKf",
        "type": "screen",
        "view": {
          "x": 10236,
          "y": 516
        }
      },
      "45": {
        "id": "45",
        "name": "TBD - Set new password confirmation",
        "next": {
          "rules": [
            {
              "interactionId": "bbeV8QkdoK",
              "taskId": "54"
            }
          ]
        },
        "screenId": "SC2eYpDOdrNlceSitYfMvQ2jI9SGn",
        "type": "screen",
        "view": {
          "x": 1404,
          "y": 1596
        }
      },
      "49": {
        "action": "custom-claims",
        "arguments": {
          "customClaims": {
            "ArgType": "",
            "type": "inline",
            "value": [
              {
                "key": "gfm_token",
                "type": "context",
                "value": "connectors.sessionResult.session_token"
              }
            ]
          }
        },
        "id": "49",
        "name": "TBD - Add GFM Token to claims",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "0"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 10716,
          "y": 540
        }
      },
      "5": {
        "action": "password-sign-in",
        "errorHandling": {
          "PasswordExpired": "automatic",
          "PasswordSignInFailed": "automatic"
        },
        "id": "5",
        "name": "Descope Sign In / Password",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "63"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 1908,
          "y": 432
        }
      },
      "53": {
        "contextKeys": [
          "sentTo.maskedEmail"
        ],
        "id": "53",
        "name": "Verify OTP",
        "next": {
          "rules": [
            {
              "interactionId": "resend",
              "taskId": "54"
            },
            {
              "interactionId": "oneTimeCodeId",
              "taskId": "56"
            }
          ]
        },
        "screenId": "SC2eYtJ9iRkYoFo34xXslUkpmxype",
        "type": "screen",
        "view": {
          "x": 2484,
          "y": 1632
        }
      },
      "54": {
        "action": "sign-up-or-in-otp-email",
        "arguments": {
          "extraTemplateVals": {
            "ArgType": "",
            "type": "inline"
          },
          "providerId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          }
        },
        "errorHandling": {
          "OTPSignUpOrInEmailFailed": "automatic"
        },
        "id": "54",
        "name": "Sign Up or In / OTP / Email (TBD on method - Replace with API connector, OTP, magic link, etc)",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "53"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 1956,
          "y": 1620
        }
      },
      "56": {
        "action": "verify-code-otp-email",
        "errorHandling": {
          "OTPVerifyCodeEmailFailed": "automatic",
          "OTPVerifyCodeExpired": "automatic"
        },
        "id": "56",
        "name": "Verify Code / OTP / Email",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "58"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 2892,
          "y": 1704
        }
      },
      "57": {
        "action": "password-update",
        "errorHandling": {
          "PasswordUpdateFailed": "automatic"
        },
        "id": "57",
        "name": "Update Password",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "59"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 3960,
          "y": 1752
        }
      },
      "58": {
        "id": "58",
        "inputKeys": [
          "newPassword"
        ],
        "name": "(TBD) Updated Expired / not complex Password (Design TBD)",
        "next": {
          "rules": [
            {
              "interactionId": "update-password",
              "taskId": "86"
            }
          ]
        },
        "screenId": "SC2eYtJB7fNklWAKg8WhTiM9aJxT9",
        "type": "screen",
        "view": {
          "x": 3216,
          "y": 1716
        }
      },
      "59": {
        "id": "59",
        "name": "TBD - Connector to get user details (phone) from GFM",
        "next": {
          "rules": [
            {
              "interactionId": "rMDimo_qSQ",
              "taskId": "42"
            }
          ]
        },
        "screenId": "SC2eYtJ7ON7xGEF4KfaUECi1CAukV",
        "type": "screen",
        "view": {
          "x": 4320,
          "y": 1776
        }
      },
      "63": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "not-empty",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": ""
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "user.phone"
                }
              },
              {
                "operator": "is-true",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": false
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "user.verifiedPhone"
                }
              }
            ],
            "interactionId": "zr8x7npun3",
            "name": "Yes"
          },
          {
            "interactionId": "ELSE",
            "name": "No"
          }
        ],
        "id": "63",
        "name": "Phone Number stored and verified?",
        "next": {
          "rules": [
            {
              "interactionId": "zr8x7npun3",
              "taskId": "89"
            },
            {
              "interactionId": "ELSE",
              "taskId": "72"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 5388,
          "y": 384
        }
      },
      "64": {
        "contextKeys": [
          "user.phone"
        ],
        "id": "64",
        "inputKeys": [
          "form.otpMethod"
        ],
        "name": "Confirm Verification Method",
        "next": {
          "rules": [
            {
              "interactionId": "ODpHRNvD-L",
              "taskId": "65"
            }
          ]
        },
        "screenId": "SC2eb2FgzBh0k52ROMSBCg6DNx7fA",
        "type": "screen",
        "view": {
          "x": 6300,
          "y": -744
        }
      },
      "65": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "Text Message"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "form.otpMethod"
                }
              }
            ],
            "interactionId": "w58nd1jvozs",
            "name": "Text"
          },
          {
            "interactionId": "ELSE",
            "name": "Voice"
          }
        ],
        "id": "65",
        "name": "Text or Voice",
        "next": {
          "rules": [
            {
              "interactionId": "w58nd1jvozs",
              "taskId": "103"
            },
            {
              "interactionId": "ELSE",
              "taskId": "77"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 6780,
          "y": -744
        }
      },
      "67": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "in",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": [
                    "BE",
                    "BG",
                    "CA",
                    "HR",
                    "CY",
                    "CZ",
                    "DK",
                    "EE",
                    "FI",
                    "FR",
                    "DE",
                    "HU",
                    "IE",
                    "IT",
                    "LV",
                    "LT",
                    "MT",
                    "NL",
                    "PL",
                    "RO",
                    "SK",
                    "SI",
                    "ES",
                    "SE",
                    "GB"
                  ]
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "geo.country"
                }
              }
            ],
            "interactionId": "oe9tw73mdw",
            "name": "Opt-in Required "
          },
          {
            "atomicConditions": [
              {
                "operator": "in",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": [
                    "DE",
                    "NO",
                    "GR",
                    "LU",
                    "CH",
                    "AT"
                  ]
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "geo.country"
                }
              }
            ],
            "interactionId": "fmxh362xgfp",
            "name": "Double Opt-in Required "
          },
          {
            "interactionId": "ELSE",
            "name": "No opt-in required"
          }
        ],
        "id": "67",
        "name": "GDPR Marketing Consent Geo Check ",
        "next": {
          "rules": [
            {
              "interactionId": "oe9tw73mdw",
              "taskId": "68"
            },
            {
              "interactionId": "fmxh362xgfp",
              "taskId": "90"
            },
            {
              "interactionId": "ELSE",
              "taskId": "12"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": -912,
          "y": -984
        }
      },
      "68": {
        "contextKeys": [
          "form.message_text",
          "form.title_text"
        ],
        "id": "68",
        "inputKeys": [
          "newPassword",
          "email",
          "firstName",
          "email",
          "customAttribute.emailConsent",
          "lastName"
        ],
        "name": "Sign Up (GDPR)",
        "next": {
          "rules": [
            {
              "interactionId": "8nBgcJmDpl",
              "taskId": "73"
            },
            {
              "interactionId": "EkzTmktRP_",
              "taskId": "3"
            }
          ]
        },
        "screenId": "SC2eeQC8nKzj7lr5nBYueWTFPkiWX",
        "type": "screen",
        "view": {
          "x": -288,
          "y": -1188
        }
      },
      "69": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "is-true",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": false
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "form.customAttributes.emailConsentDoubleOp"
                }
              }
            ],
            "interactionId": "144tqs541qxl",
            "name": "double opt in user checked off box"
          },
          {
            "atomicConditions": [
              {
                "operator": "is-true",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": ""
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "form.customAttributes.emailConsent"
                }
              }
            ],
            "interactionId": "cf0o3friypa",
            "name": "opt in user checked off box"
          },
          {
            "interactionId": "ELSE",
            "name": "everyone else"
          }
        ],
        "id": "69",
        "name": "GDPR Double Opt in",
        "next": {
          "rules": [
            {
              "interactionId": "144tqs541qxl",
              "taskId": "92"
            },
            {
              "interactionId": "cf0o3friypa",
              "taskId": "63"
            },
            {
              "interactionId": "ELSE",
              "taskId": "63"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 2376,
          "y": -492
        }
      },
      "72": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "in",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": [
                    "HT",
                    "PA",
                    "AF",
                    "JO",
                    "KW",
                    "LK",
                    "EE",
                    "LV",
                    "BO",
                    "EC",
                    "BJ",
                    "BW",
                    "BF",
                    "CM",
                    "ET",
                    "GN",
                    "GW",
                    "LY",
                    "MG",
                    "MA",
                    "SN",
                    "ZW",
                    "PG",
                    "AL"
                  ]
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "geo.country"
                }
              }
            ],
            "interactionId": "b4469l7ighj",
            "name": "SMS only"
          },
          {
            "interactionId": "ELSE",
            "name": "Voice and SMS allowed "
          }
        ],
        "id": "72",
        "name": "Twilio Verify",
        "next": {
          "rules": [
            {
              "interactionId": "b4469l7ighj",
              "taskId": "75"
            },
            {
              "interactionId": "ELSE",
              "taskId": "18"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 5808,
          "y": 1284
        }
      },
      "73": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "in",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": [
                    "CU",
                    "NI",
                    "AZ",
                    "BD",
                    "CN",
                    "KP",
                    "HK",
                    "IR",
                    "IQ",
                    "KG",
                    "LB",
                    "MY",
                    "AF",
                    "MO",
                    "MM",
                    "PK",
                    "SY",
                    "UZ",
                    "YE",
                    "BY",
                    "BA",
                    "RU",
                    "UA",
                    "CI",
                    "ML",
                    "NG",
                    "SS",
                    "SD",
                    "AL",
                    "DZ"
                  ]
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "geo.country"
                }
              }
            ],
            "interactionId": "i1um93edtt",
            "name": "Banned Country"
          },
          {
            "interactionId": "ELSE",
            "name": "Allowed Country"
          }
        ],
        "id": "73",
        "name": "Banned Countries",
        "next": {
          "rules": [
            {
              "interactionId": "i1um93edtt",
              "taskId": "12"
            },
            {
              "interactionId": "ELSE",
              "taskId": "30"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 588,
          "y": -816
        }
      },
      "75": {
        "id": "75",
        "name": "(TBD Product) Capture Phone Number for SMS only",
        "next": {
          "rules": [
            {
              "interactionId": "ODpHRNvD-L",
              "taskId": "20"
            }
          ]
        },
        "screenId": "SC2eprfYKGW2kfRMWZMxu0C8NaYRT",
        "type": "screen",
        "view": {
          "x": 6168,
          "y": 1092
        }
      },
      "77": {
        "action": "sign-up-or-in-otp-voice",
        "arguments": {
          "extraTemplateVals": {
            "ArgType": "",
            "type": "inline"
          },
          "providerId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          }
        },
        "errorHandling": {
          "OTPSignUpOrInPhoneFailed": "automatic"
        },
        "id": "77",
        "name": "Sign Up or In / OTP / Voice call",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "78"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 7236,
          "y": -396
        }
      },
      "78": {
        "contextKeys": [
          "sentTo.maskedPhone"
        ],
        "id": "78",
        "name": "Verify OTP",
        "next": {
          "rules": [
            {
              "interactionId": "resend",
              "taskId": "77"
            },
            {
              "interactionId": "oneTimeCodeId",
              "taskId": "79"
            }
          ]
        },
        "screenId": "SC2eprwPtPpYmuaSHQOoZHeYV25ru",
        "type": "screen",
        "view": {
          "x": 7692,
          "y": -408
        }
      },
      "79": {
        "action": "verify-code-otp-voice",
        "id": "79",
        "name": "Verify Code / OTP / Voice call",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "99"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 8904,
          "y": -408
        }
      },
      "8": {
        "action": "sign-up-or-in-otp-sms",
        "arguments": {
          "extraTemplateVals": {
            "ArgType": "",
            "type": "inline"
          },
          "providerId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          }
        },
        "errorHandling": {
          "OTPSignUpOrInPhoneFailed": "automatic"
        },
        "id": "8",
        "name": "Sign Up or In / OTP / SMS",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "9"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 7248,
          "y": -768
        }
      },
      "80": {
        "action": "update-user-otp-voice",
        "arguments": {
          "addToLoginIDs": {
            "ArgType": "",
            "type": "inline",
            "value": false
          },
          "extraTemplateVals": {
            "ArgType": "",
            "type": "inline"
          },
          "onMergeUseExisting": {
            "ArgType": "",
            "type": "inline",
            "value": "true"
          },
          "providerId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": ""
          }
        },
        "errorHandling": {
          "OTPUnauthorizedRequest": "automatic",
          "OTPUpdateUserPhoneFailed": "automatic"
        },
        "id": "80",
        "name": "Update User / OTP / Voice call",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "81"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 7080,
          "y": 1728
        }
      },
      "81": {
        "contextKeys": [
          "sentTo.maskedPhone"
        ],
        "id": "81",
        "name": "Verify OTP",
        "next": {
          "rules": [
            {
              "interactionId": "resend",
              "taskId": "80"
            },
            {
              "interactionId": "oneTimeCodeId",
              "taskId": "82"
            }
          ]
        },
        "screenId": "SC2eps89vCrcAf8oh59ktO9t23foC",
        "type": "screen",
        "view": {
          "x": 7716,
          "y": 1728
        }
      },
      "82": {
        "action": "verify-code-otp-voice",
        "id": "82",
        "name": "Verify Code / OTP / Voice call",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "99"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 8892,
          "y": 1728
        }
      },
      "86": {
        "id": "86",
        "name": "Replace with connectors (Migrate)",
        "next": {
          "rules": [
            {
              "interactionId": "v4zsJKCHEw",
              "taskId": "57"
            }
          ]
        },
        "screenId": "SC2eshrmsyI35akjNItOhAJ0tMUpl",
        "type": "screen",
        "view": {
          "x": 3576,
          "y": 1728
        }
      },
      "87": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "in",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": [
                    "CU",
                    "NI",
                    "AZ",
                    "BD",
                    "CN",
                    "KP",
                    "HK",
                    "IR",
                    "IQ",
                    "KG",
                    "LB",
                    "MY",
                    "AF",
                    "MO",
                    "MM",
                    "PK",
                    "SY",
                    "UZ",
                    "YE",
                    "BY",
                    "BA",
                    "RU",
                    "UA",
                    "CI",
                    "ML",
                    "NG",
                    "SS",
                    "SD"
                  ]
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "geo.country"
                }
              }
            ],
            "interactionId": "i1um93edtt",
            "name": "Banned Country"
          },
          {
            "interactionId": "ELSE",
            "name": "Allowed Country"
          }
        ],
        "id": "87",
        "name": "Banned Country?",
        "next": {
          "rules": [
            {
              "interactionId": "i1um93edtt",
              "taskId": "3"
            },
            {
              "interactionId": "ELSE",
              "taskId": "31"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 396,
          "y": 768
        }
      },
      "88": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "in",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": [
                    "CU",
                    "NI",
                    "AZ",
                    "BD",
                    "CN",
                    "KP",
                    "HK",
                    "IR",
                    "IQ",
                    "KG",
                    "LB",
                    "MY",
                    "AF",
                    "MO",
                    "MM",
                    "PK",
                    "SY",
                    "UZ",
                    "YE",
                    "BY",
                    "BA",
                    "RU",
                    "UA",
                    "CI",
                    "ML",
                    "NG",
                    "SS",
                    "SD"
                  ]
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "geo.country"
                }
              }
            ],
            "interactionId": "i1um93edtt",
            "name": "Banned Country"
          },
          {
            "interactionId": "ELSE",
            "name": "Allowed Country"
          }
        ],
        "id": "88",
        "name": "Banned Countries",
        "next": {
          "rules": [
            {
              "interactionId": "i1um93edtt",
              "taskId": "24"
            },
            {
              "interactionId": "ELSE",
              "taskId": "35"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 468,
          "y": 2436
        }
      },
      "89": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "in",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": [
                    "HT",
                    "PA",
                    "AF",
                    "JO",
                    "KW",
                    "LK",
                    "EE",
                    "LV",
                    "BO",
                    "EC",
                    "BJ",
                    "BW",
                    "BF",
                    "CM",
                    "ET",
                    "GN",
                    "GW",
                    "LY",
                    "MG",
                    "MA",
                    "SN",
                    "ZW",
                    "PG",
                    "AL"
                  ]
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "geo.country"
                }
              }
            ],
            "interactionId": "b4469l7ighj",
            "name": "SMS only"
          },
          {
            "interactionId": "ELSE",
            "name": "Voice and SMS allowed "
          }
        ],
        "id": "89",
        "name": "Twilio Verify ",
        "next": {
          "rules": [
            {
              "interactionId": "b4469l7ighj",
              "taskId": "8"
            },
            {
              "interactionId": "ELSE",
              "taskId": "64"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 5760,
          "y": -744
        }
      },
      "9": {
        "contextKeys": [
          "sentTo.maskedPhone"
        ],
        "id": "9",
        "name": "Verify OTP",
        "next": {
          "rules": [
            {
              "interactionId": "resend",
              "taskId": "8"
            },
            {
              "interactionId": "oneTimeCodeId",
              "taskId": "10"
            }
          ]
        },
        "screenId": "SC2eVZZfliK2w3JqSFiC3w3mqcJyL",
        "type": "screen",
        "view": {
          "x": 7692,
          "y": -780
        }
      },
      "90": {
        "contextKeys": [
          "form.message_text",
          "form.title_text"
        ],
        "id": "90",
        "inputKeys": [
          "newPassword",
          "email",
          "firstName",
          "email",
          "customAttributes.emailConsentDoubleOp",
          "lastName"
        ],
        "name": "Sign Up - GDPR Double Opt In",
        "next": {
          "rules": [
            {
              "interactionId": "8nBgcJmDpl",
              "taskId": "73"
            },
            {
              "interactionId": "EkzTmktRP_",
              "taskId": "3"
            }
          ]
        },
        "screenId": "SC2eyXQLy41Wp3t8m1E16rZmrquQW",
        "type": "screen",
        "view": {
          "x": -276,
          "y": -1452
        }
      },
      "92": {
        "id": "92",
        "name": "TBD Send Double Opt Email",
        "next": {
          "rules": [
            {
              "interactionId": "i2_Q82r0iB",
              "taskId": "63"
            }
          ]
        },
        "screenId": "SC2eybv2w8W6nFZYSNBOIQvzDvnn2",
        "type": "screen",
        "view": {
          "x": 2820,
          "y": -492
        }
      },
      "93": {
        "contextKeys": [
          "embeddedTokenURI"
        ],
        "id": "93",
        "name": "TBD - Password Send connector",
        "next": {
          "rules": [
            {
              "interactionId": "DGiC5vnNkQ",
              "taskId": "26"
            }
          ]
        },
        "screenId": "SC2fCFKXzkEUUfhBDQaUJhtdYxFld",
        "type": "screen",
        "view": {
          "x": 1764,
          "y": 2868
        }
      },
      "94": {
        "action": "sign-in-embedded-link",
        "arguments": {
          "timeout": {
            "type": "inline",
            "value": ""
          },
          "uri": {
            "type": "inline",
            "value": ""
          },
          "verifyStepId": {
            "type": "inline",
            "value": "94.end"
          }
        },
        "id": "94",
        "name": "Sign In / Embedded Link",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "93"
            },
            {
              "interactionId": "success",
              "taskId": "94.end"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 1392,
          "y": 2868
        }
      },
      "94.end": {
        "action": "verify-magic-link",
        "arguments": {},
        "id": "94.end",
        "name": "Sign In / Embedded Link",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "29"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 1392,
          "y": 2868
        }
      },
      "95": {
        "action": "connector",
        "arguments": {
          "args": {
            "type": "inline",
            "value": [
              {
                "key": "endpoint",
                "type": "string",
                "value": "/personv2_nodb/migrate"
              },
              {
                "key": "timeout",
                "type": "number",
                "value": 10
              },
              {
                "key": "payload",
                "type": "string",
                "value": "{\n  \"email\": \"{{form.email}}\",\n  \"password\": \"{{newPassword}}\"\n}"
              }
            ]
          },
          "command": {
            "type": "inline",
            "value": "put"
          },
          "connectorId": {
            "type": "inline",
            "value": "CI2fnc9SxtnAfhbQCopC8jo2ZKSGV"
          },
          "resultPath": {
            "type": "inline",
            "value": "migrateResult"
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": "http"
          }
        },
        "errorHandling": {
          "request_error": "custom"
        },
        "id": "95",
        "name": "Migrate User",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "32"
            },
            {
              "interactionId": "request_error",
              "taskId": "96"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 816,
          "y": -396
        }
      },
      "96": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "401"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "connectors.migrateResult.statusCode"
                }
              }
            ],
            "interactionId": "0mdcvd5imfwg",
            "name": "401 - Invalid PW"
          },
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "404"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "connectors.migrateResult.statusCode"
                }
              }
            ],
            "interactionId": "xjmkfzry3c",
            "name": "404 - Not Found"
          },
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "403"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "connectors.migrateResult.statusCode"
                }
              }
            ],
            "interactionId": "thqq4vxrlck",
            "name": "403 - Banned"
          },
          {
            "interactionId": "ELSE",
            "name": "ELSE"
          }
        ],
        "id": "96",
        "name": "Migrate Response Condition",
        "next": {
          "rules": [
            {
              "interactionId": "0mdcvd5imfwg",
              "taskId": "24"
            },
            {
              "interactionId": "xjmkfzry3c",
              "taskId": "14"
            },
            {
              "interactionId": "thqq4vxrlck",
              "taskId": "41"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 1344,
          "y": -408
        }
      },
      "97": {
        "action": "connector",
        "arguments": {
          "args": {
            "type": "inline",
            "value": [
              {
                "key": "endpoint",
                "type": "string",
                "value": "/personv2_nodb/migrate"
              },
              {
                "key": "timeout",
                "type": "number",
                "value": 10
              },
              {
                "key": "payload",
                "type": "string",
                "value": "{\n  \"email\": \"{{form.email}}\",\n  \"password\": \"{{newPassword}}\"\n}"
              }
            ]
          },
          "command": {
            "type": "inline",
            "value": "put"
          },
          "connectorId": {
            "type": "inline",
            "value": "CI2fnc9SxtnAfhbQCopC8jo2ZKSGV"
          },
          "resultPath": {
            "type": "inline",
            "value": "migrateResult"
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": "http"
          }
        },
        "errorHandling": {
          "request_error": "custom"
        },
        "id": "97",
        "name": "Migrate User",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "32"
            },
            {
              "interactionId": "request_error",
              "taskId": "98"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 1344,
          "y": 852
        }
      },
      "98": {
        "conditions": [
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "401"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "connectors.migrateResult.statusCode"
                }
              }
            ],
            "interactionId": "0mdcvd5imfwg",
            "name": "401 - Invalid PW"
          },
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "404"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "connectors.migrateResult.statusCode"
                }
              }
            ],
            "interactionId": "xjmkfzry3c",
            "name": "404 - Not Found"
          },
          {
            "atomicConditions": [
              {
                "operator": "equal",
                "predicate": {
                  "ArgType": "",
                  "type": "inline",
                  "value": "403"
                },
                "target": {
                  "ArgType": "",
                  "type": "context",
                  "value": "connectors.migrateResult.statusCode"
                }
              }
            ],
            "interactionId": "thqq4vxrlck",
            "name": "403 - Banned"
          },
          {
            "interactionId": "ELSE",
            "name": "ELSE"
          }
        ],
        "id": "98",
        "name": "Migrate Response Condition",
        "next": {
          "rules": [
            {
              "interactionId": "0mdcvd5imfwg",
              "taskId": "24"
            },
            {
              "interactionId": "xjmkfzry3c",
              "taskId": "12"
            },
            {
              "interactionId": "thqq4vxrlck",
              "taskId": "41"
            }
          ]
        },
        "type": "condition",
        "view": {
          "x": 1776,
          "y": 864
        }
      },
      "99": {
        "action": "connector",
        "arguments": {
          "args": {
            "type": "inline",
            "value": [
              {
                "key": "endpoint",
                "type": "string",
                "value": "/personv2_nodb/accounts"
              },
              {
                "key": "timeout",
                "type": "number",
                "value": 10
              },
              {
                "key": "payload",
                "type": "string",
                "value": "{\n  \"first_name\": \"{{user.givenName}}\",\n  \"last_name\": \"{{user.familyName}}\",\n  \"email\": \"{{user.email}}\",\n  \"email_verified\": true,\n  \"consent\": {\n    \"email\": {\n      \"opt_in\": true\n    },\n    \"phone\": {\n      \"opt_in\": true,\n      \"type\": \"sms\"\n    }\n  },\n  \"language\": \"en_US\",\n  \"phone_country_code\": \"US\",\n  \"phone\": {\n    \"number\": \"{{user.phone}}\",\n    \"verified\": true\n  },\n  \"external_user_id\": \"{{user.userId}}\"\n}"
              }
            ]
          },
          "command": {
            "type": "inline",
            "value": "patch"
          },
          "connectorId": {
            "type": "inline",
            "value": "CI2fnc9SxtnAfhbQCopC8jo2ZKSGV"
          },
          "resultPath": {
            "type": "inline",
            "value": "accountsPatchResult"
          },
          "templateId": {
            "ArgType": "",
            "type": "inline",
            "value": "http"
          }
        },
        "errorHandling": {
          "request_error": "custom"
        },
        "id": "99",
        "name": "Update (PATCH) GFM User",
        "next": {
          "rules": [
            {
              "interactionId": "success",
              "taskId": "100"
            },
            {
              "interactionId": "request_error",
              "taskId": "101"
            }
          ]
        },
        "type": "automated",
        "view": {
          "x": 9744,
          "y": 708
        }
      },
      "start": {
        "id": "start",
        "name": "start",
        "next": {
          "rules": [
            {
              "taskId": "2"
            }
          ]
        },
        "view": {
          "x": -1752,
          "y": 576
        }
      }
    }
  },
  "etag": "manual",
  "fingerprint": false,
  "id": "combined-flow-v2",
  "name": "combined-flow-v2",
  "translate": true,
  "translateConnectorID": "manual",
  "translateSourceLang": "en",
  "translateTargetLangs": [
    "zh",
    "zh-tw",
    "nl",
    "fr",
    "de",
    "he",
    "hi",
    "it",
    "ja",
    "ko",
    "pt",
    "ru",
    "es"
  ],
  "widget": false
}
